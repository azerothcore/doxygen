<!-- HTML header for doxygen 1.9.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link rel="icon" href="favicon.ico" type="image/x-icon">
<title>AzerothCore Doxygen</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeParagraphLink.init()
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../20147732.png"/></td>
  <td id="projectalign">
   <div id="projectname">AzerothCore<span id="projectnumber">&#160;3.3.5a</span>
   </div>
   <div id="projectbrief">OpenSource WoW Emulator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d1/d18/SpellProcDBCValidationTest_8cpp.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">SpellProcDBCValidationTest.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="../../df/dd9/classUnit.html">Unit</a> tests for validating spell_proc entries against Spell.dbc.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../">SpellProcTestData.h</a>&quot;</code><br />
<code>#include &quot;gtest/gtest.h&quot;</code><br />
<code>#include &lt;algorithm&gt;</code><br />
<code>#include &lt;map&gt;</code><br />
<code>#include &lt;set&gt;</code><br />
</div>
<p><a href="">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d38/classSpellProcDBCValidationTest.html">SpellProcDBCValidationTest</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/da3/classSpellProcDBCValidationParamTest.html">SpellProcDBCValidationParamTest</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9c2b63e811e5bae6092ac12f33e514b8" id="r_a9c2b63e811e5bae6092ac12f33e514b8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d18/SpellProcDBCValidationTest_8cpp.html#a9c2b63e811e5bae6092ac12f33e514b8">TEST_P</a> (<a class="el" href="../../dd/da3/classSpellProcDBCValidationParamTest.html">SpellProcDBCValidationParamTest</a>, EntryHasValidSpellId)</td></tr>
<tr class="separator:a9c2b63e811e5bae6092ac12f33e514b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bcaae4dcd5fec113966d51c2f6f60d0" id="r_a1bcaae4dcd5fec113966d51c2f6f60d0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d18/SpellProcDBCValidationTest_8cpp.html#a1bcaae4dcd5fec113966d51c2f6f60d0">INSTANTIATE_TEST_SUITE_P</a> (AllSpellProcEntries, <a class="el" href="../../dd/da3/classSpellProcDBCValidationParamTest.html">SpellProcDBCValidationParamTest</a>, ::testing::ValuesIn(<a class="el" href="../../da/da0/SpellProcTestData_8h.html#a39025d5b336e745566f739e9d1f68e78">GetAllSpellProcTestEntries</a>()), [](const testing::TestParamInfo&lt; <a class="el" href="../../d4/d07/structSpellProcTestEntry.html">SpellProcTestEntry</a> &gt; &amp;info) { int32_t id=info.param.SpellId;if(id&lt; 0) return &quot;SpellId_N&quot;+std::to_string(-id);return &quot;SpellId_&quot;+std::to_string(id);})</td></tr>
<tr class="separator:a1bcaae4dcd5fec113966d51c2f6f60d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3140cdc3c6be8230853a19725adce0df" id="r_a3140cdc3c6be8230853a19725adce0df"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d18/SpellProcDBCValidationTest_8cpp.html#a3140cdc3c6be8230853a19725adce0df">TEST_F</a> (<a class="el" href="../../d5/d38/classSpellProcDBCValidationTest.html">SpellProcDBCValidationTest</a>, CountEntriesWithDBCData)</td></tr>
<tr class="separator:a3140cdc3c6be8230853a19725adce0df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dd4a9f2ad7b9f9c90f178e412d6853a" id="r_a4dd4a9f2ad7b9f9c90f178e412d6853a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d18/SpellProcDBCValidationTest_8cpp.html#a4dd4a9f2ad7b9f9c90f178e412d6853a">TEST_F</a> (<a class="el" href="../../d5/d38/classSpellProcDBCValidationTest.html">SpellProcDBCValidationTest</a>, CountEntriesAddingValue)</td></tr>
<tr class="separator:a4dd4a9f2ad7b9f9c90f178e412d6853a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae6111f031cb367b403d6c1fae593245" id="r_aae6111f031cb367b403d6c1fae593245"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d18/SpellProcDBCValidationTest_8cpp.html#aae6111f031cb367b403d6c1fae593245">TEST_F</a> (<a class="el" href="../../d5/d38/classSpellProcDBCValidationTest.html">SpellProcDBCValidationTest</a>, CategorizeEntriesByFeature)</td></tr>
<tr class="separator:aae6111f031cb367b403d6c1fae593245"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67fce2ede01fc117b24ed6c0015ee5d5" id="r_a67fce2ede01fc117b24ed6c0015ee5d5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d18/SpellProcDBCValidationTest_8cpp.html#a67fce2ede01fc117b24ed6c0015ee5d5">TEST_F</a> (<a class="el" href="../../d5/d38/classSpellProcDBCValidationTest.html">SpellProcDBCValidationTest</a>, IdentifyDBCOverrides)</td></tr>
<tr class="separator:a67fce2ede01fc117b24ed6c0015ee5d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16d0dc4448f95f4d571e474baa22b657" id="r_a16d0dc4448f95f4d571e474baa22b657"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d18/SpellProcDBCValidationTest_8cpp.html#a16d0dc4448f95f4d571e474baa22b657">TEST_F</a> (<a class="el" href="../../d5/d38/classSpellProcDBCValidationTest.html">SpellProcDBCValidationTest</a>, CountNegativeSpellIds)</td></tr>
<tr class="separator:a16d0dc4448f95f4d571e474baa22b657"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14eea23ad6fde730eac3ff84fdffc8ad" id="r_a14eea23ad6fde730eac3ff84fdffc8ad"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d18/SpellProcDBCValidationTest_8cpp.html#a14eea23ad6fde730eac3ff84fdffc8ad">TEST_F</a> (<a class="el" href="../../d5/d38/classSpellProcDBCValidationTest.html">SpellProcDBCValidationTest</a>, CoverageBySpellFamily)</td></tr>
<tr class="separator:a14eea23ad6fde730eac3ff84fdffc8ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a918f689a14967e97deeb88c36f959a81" id="r_a918f689a14967e97deeb88c36f959a81"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d18/SpellProcDBCValidationTest_8cpp.html#a918f689a14967e97deeb88c36f959a81">TEST_F</a> (<a class="el" href="../../d5/d38/classSpellProcDBCValidationTest.html">SpellProcDBCValidationTest</a>, NoDuplicateSpellIds)</td></tr>
<tr class="separator:a918f689a14967e97deeb88c36f959a81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d68edc629baf508a75ad0306d5a9123" id="r_a5d68edc629baf508a75ad0306d5a9123"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d18/SpellProcDBCValidationTest_8cpp.html#a5d68edc629baf508a75ad0306d5a9123">TEST_F</a> (<a class="el" href="../../d5/d38/classSpellProcDBCValidationTest.html">SpellProcDBCValidationTest</a>, AllEntriesHaveValidStructure)</td></tr>
<tr class="separator:a5d68edc629baf508a75ad0306d5a9123"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="../../df/dd9/classUnit.html">Unit</a> tests for validating spell_proc entries against Spell.dbc. </p>
<p>Tests validate that spell_proc entries provide value beyond DBC defaults:</p><ul>
<li>Entries that override DBC ProcFlags/ProcChance/ProcCharges</li>
<li>Entries that add new functionality (PPM, cooldowns, filtering)</li>
<li>Identification of potentially redundant entries</li>
</ul>
<hr  />
 <h1><a class="anchor" id="autotoc_md4"></a>
DBC DATA POPULATION STATUS</h1>
<p>The DBC_ProcFlags, DBC_ProcChance, and DBC_ProcCharges fields in <a class="el" href="../../d4/d07/structSpellProcTestEntry.html" title="Test data entry from spell_proc table with DBC comparison data.">SpellProcTestEntry</a> are currently populated with zeros (0, 0, 0) for all entries. To fully validate spell_proc entries against DBC:</p>
<ol type="1">
<li>Use the generate_spell_proc_dbc_data.py script with MCP connection</li>
<li>Or manually query: get_spell_dbc_proc_info(spell_id) for each spell</li>
</ol>
<p>Tests that require DBC data will check HasDBCData() and skip appropriately. Once DBC data is populated, the statistics tests will show:</p><ul>
<li>How many entries override DBC defaults</li>
<li>How many entries add new functionality not in DBC </li>
</ul>
<h1><a class="anchor" id="autotoc_md5"></a>
- How many entries might be redundant (just duplicate DBC values)</h1>

<p class="definition">Definition in file <a class="el" href="../../">SpellProcDBCValidationTest.cpp</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a1bcaae4dcd5fec113966d51c2f6f60d0" name="a1bcaae4dcd5fec113966d51c2f6f60d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bcaae4dcd5fec113966d51c2f6f60d0">&#9670;&#160;</a></span>INSTANTIATE_TEST_SUITE_P()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">INSTANTIATE_TEST_SUITE_P </td>
          <td>(</td>
          <td class="paramtype">AllSpellProcEntries&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/da3/classSpellProcDBCValidationParamTest.html">SpellProcDBCValidationParamTest</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">::testing::ValuesIn(<a class="el" href="../../da/da0/SpellProcTestData_8h.html#a39025d5b336e745566f739e9d1f68e78">GetAllSpellProcTestEntries</a>())&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">[] (const testing::TestParamInfo&lt; <a class="el" href="../../d4/d07/structSpellProcTestEntry.html">SpellProcTestEntry</a> &gt; &amp;info) { int32_t id=info.param.SpellId;if(id&lt; 0) return &quot;SpellId_N&quot;+std::to_string(-id);return &quot;SpellId_&quot;+std::to_string(id);}&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a5d68edc629baf508a75ad0306d5a9123" name="a5d68edc629baf508a75ad0306d5a9123"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d68edc629baf508a75ad0306d5a9123">&#9670;&#160;</a></span>TEST_F() <span class="overload">[1/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d38/classSpellProcDBCValidationTest.html">SpellProcDBCValidationTest</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">AllEntriesHaveValidStructure&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  340</span>{</div>
<div class="line"><span class="lineno">  341</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; entry : _allEntries)</div>
<div class="line"><span class="lineno">  342</span>    {</div>
<div class="line"><span class="lineno">  343</span>        <span class="comment">// SpellId must be non-zero</span></div>
<div class="line"><span class="lineno">  344</span>        EXPECT_NE(entry.SpellId, 0)</div>
<div class="line"><span class="lineno">  345</span>            &lt;&lt; <span class="stringliteral">&quot;SpellId cannot be zero&quot;</span>;</div>
<div class="line"><span class="lineno">  346</span> </div>
<div class="line"><span class="lineno">  347</span>        <span class="comment">// If Chance is set, it should be reasonable (0-100, or 101 for 100% from DBC)</span></div>
<div class="line"><span class="lineno">  348</span>        <span class="keywordflow">if</span> (entry.Chance &gt; 0)</div>
<div class="line"><span class="lineno">  349</span>        {</div>
<div class="line"><span class="lineno">  350</span>            EXPECT_LE(entry.Chance, 101.0f)</div>
<div class="line"><span class="lineno">  351</span>                &lt;&lt; <span class="stringliteral">&quot;SpellId &quot;</span> &lt;&lt; entry.SpellId &lt;&lt; <span class="stringliteral">&quot; has unusual Chance: &quot;</span> &lt;&lt; entry.Chance;</div>
<div class="line"><span class="lineno">  352</span>        }</div>
<div class="line"><span class="lineno">  353</span> </div>
<div class="line"><span class="lineno">  354</span>        <span class="comment">// PPM should be reasonable (typically 0-60)</span></div>
<div class="line"><span class="lineno">  355</span>        <span class="keywordflow">if</span> (entry.ProcsPerMinute &gt; 0)</div>
<div class="line"><span class="lineno">  356</span>        {</div>
<div class="line"><span class="lineno">  357</span>            EXPECT_LE(entry.ProcsPerMinute, 60.0f)</div>
<div class="line"><span class="lineno">  358</span>                &lt;&lt; <span class="stringliteral">&quot;SpellId &quot;</span> &lt;&lt; entry.SpellId &lt;&lt; <span class="stringliteral">&quot; has unusual PPM: &quot;</span> &lt;&lt; entry.ProcsPerMinute;</div>
<div class="line"><span class="lineno">  359</span>        }</div>
<div class="line"><span class="lineno">  360</span> </div>
<div class="line"><span class="lineno">  361</span>        <span class="comment">// SpellPhaseMask should use valid values</span></div>
<div class="line"><span class="lineno">  362</span>        <span class="keywordflow">if</span> (entry.SpellPhaseMask != 0)</div>
<div class="line"><span class="lineno">  363</span>        {</div>
<div class="line"><span class="lineno">  364</span>            <span class="comment">// Valid phase masks: PROC_SPELL_PHASE_CAST(1), PROC_SPELL_PHASE_HIT(2), PROC_SPELL_PHASE_FINISH(4)</span></div>
<div class="line"><span class="lineno">  365</span>            EXPECT_LE(entry.SpellPhaseMask, 7u)</div>
<div class="line"><span class="lineno">  366</span>                &lt;&lt; <span class="stringliteral">&quot;SpellId &quot;</span> &lt;&lt; entry.SpellId &lt;&lt; <span class="stringliteral">&quot; has unusual SpellPhaseMask: &quot;</span> &lt;&lt; entry.SpellPhaseMask;</div>
<div class="line"><span class="lineno">  367</span>        }</div>
<div class="line"><span class="lineno">  368</span>    }</div>
<div class="line"><span class="lineno">  369</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aae6111f031cb367b403d6c1fae593245" name="aae6111f031cb367b403d6c1fae593245"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae6111f031cb367b403d6c1fae593245">&#9670;&#160;</a></span>TEST_F() <span class="overload">[2/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d38/classSpellProcDBCValidationTest.html">SpellProcDBCValidationTest</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CategorizeEntriesByFeature&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  165</span>{</div>
<div class="line"><span class="lineno">  166</span>    <span class="keywordtype">size_t</span> hasPPM = 0;</div>
<div class="line"><span class="lineno">  167</span>    <span class="keywordtype">size_t</span> hasCooldown = 0;</div>
<div class="line"><span class="lineno">  168</span>    <span class="keywordtype">size_t</span> hasSpellTypeMask = 0;</div>
<div class="line"><span class="lineno">  169</span>    <span class="keywordtype">size_t</span> hasSpellPhaseMask = 0;</div>
<div class="line"><span class="lineno">  170</span>    <span class="keywordtype">size_t</span> hasHitMask = 0;</div>
<div class="line"><span class="lineno">  171</span>    <span class="keywordtype">size_t</span> hasAttributesMask = 0;</div>
<div class="line"><span class="lineno">  172</span>    <span class="keywordtype">size_t</span> hasSpellFamilyMask = 0;</div>
<div class="line"><span class="lineno">  173</span>    <span class="keywordtype">size_t</span> hasSchoolMask = 0;</div>
<div class="line"><span class="lineno">  174</span>    <span class="keywordtype">size_t</span> hasCharges = 0;</div>
<div class="line"><span class="lineno">  175</span>    <span class="keywordtype">size_t</span> hasDisableEffectsMask = 0;</div>
<div class="line"><span class="lineno">  176</span> </div>
<div class="line"><span class="lineno">  177</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; entry : _allEntries)</div>
<div class="line"><span class="lineno">  178</span>    {</div>
<div class="line"><span class="lineno">  179</span>        <span class="keywordflow">if</span> (entry.ProcsPerMinute &gt; 0) hasPPM++;</div>
<div class="line"><span class="lineno">  180</span>        <span class="keywordflow">if</span> (entry.Cooldown &gt; 0) hasCooldown++;</div>
<div class="line"><span class="lineno">  181</span>        <span class="keywordflow">if</span> (entry.SpellTypeMask != 0) hasSpellTypeMask++;</div>
<div class="line"><span class="lineno">  182</span>        <span class="keywordflow">if</span> (entry.SpellPhaseMask != 0) hasSpellPhaseMask++;</div>
<div class="line"><span class="lineno">  183</span>        <span class="keywordflow">if</span> (entry.HitMask != 0) hasHitMask++;</div>
<div class="line"><span class="lineno">  184</span>        <span class="keywordflow">if</span> (entry.AttributesMask != 0) hasAttributesMask++;</div>
<div class="line"><span class="lineno">  185</span>        <span class="keywordflow">if</span> (entry.SpellFamilyMask0 != 0 || entry.SpellFamilyMask1 != 0 || entry.SpellFamilyMask2 != 0)</div>
<div class="line"><span class="lineno">  186</span>            hasSpellFamilyMask++;</div>
<div class="line"><span class="lineno">  187</span>        <span class="keywordflow">if</span> (entry.SchoolMask != 0) hasSchoolMask++;</div>
<div class="line"><span class="lineno">  188</span>        <span class="keywordflow">if</span> (entry.Charges &gt; 0) hasCharges++;</div>
<div class="line"><span class="lineno">  189</span>        <span class="keywordflow">if</span> (entry.DisableEffectsMask != 0) hasDisableEffectsMask++;</div>
<div class="line"><span class="lineno">  190</span>    }</div>
<div class="line"><span class="lineno">  191</span> </div>
<div class="line"><span class="lineno">  192</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;[  INFO    ] Feature usage (adds value beyond DBC):\n&quot;</span></div>
<div class="line"><span class="lineno">  193</span>              &lt;&lt; <span class="stringliteral">&quot;             PPM: &quot;</span> &lt;&lt; hasPPM &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><span class="lineno">  194</span>              &lt;&lt; <span class="stringliteral">&quot;             Cooldown: &quot;</span> &lt;&lt; hasCooldown &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><span class="lineno">  195</span>              &lt;&lt; <span class="stringliteral">&quot;             SpellTypeMask: &quot;</span> &lt;&lt; hasSpellTypeMask &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><span class="lineno">  196</span>              &lt;&lt; <span class="stringliteral">&quot;             SpellPhaseMask: &quot;</span> &lt;&lt; hasSpellPhaseMask &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><span class="lineno">  197</span>              &lt;&lt; <span class="stringliteral">&quot;             HitMask: &quot;</span> &lt;&lt; hasHitMask &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><span class="lineno">  198</span>              &lt;&lt; <span class="stringliteral">&quot;             AttributesMask: &quot;</span> &lt;&lt; hasAttributesMask &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><span class="lineno">  199</span>              &lt;&lt; <span class="stringliteral">&quot;             SpellFamilyMask: &quot;</span> &lt;&lt; hasSpellFamilyMask &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><span class="lineno">  200</span>              &lt;&lt; <span class="stringliteral">&quot;             SchoolMask: &quot;</span> &lt;&lt; hasSchoolMask &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><span class="lineno">  201</span>              &lt;&lt; <span class="stringliteral">&quot;             Charges: &quot;</span> &lt;&lt; hasCharges &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><span class="lineno">  202</span>              &lt;&lt; <span class="stringliteral">&quot;             DisableEffectsMask: &quot;</span> &lt;&lt; hasDisableEffectsMask &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  203</span> </div>
<div class="line"><span class="lineno">  204</span>    <span class="comment">// Most entries should use at least one extended feature</span></div>
<div class="line"><span class="lineno">  205</span>    <span class="keywordtype">size_t</span> usingExtendedFeatures = 0;</div>
<div class="line"><span class="lineno">  206</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; entry : _allEntries)</div>
<div class="line"><span class="lineno">  207</span>    {</div>
<div class="line"><span class="lineno">  208</span>        <span class="keywordflow">if</span> (entry.ProcsPerMinute &gt; 0 || entry.Cooldown &gt; 0 ||</div>
<div class="line"><span class="lineno">  209</span>            entry.SpellTypeMask != 0 || entry.SpellPhaseMask != 0 ||</div>
<div class="line"><span class="lineno">  210</span>            entry.HitMask != 0 || entry.AttributesMask != 0 ||</div>
<div class="line"><span class="lineno">  211</span>            entry.SpellFamilyMask0 != 0 || entry.SpellFamilyMask1 != 0 ||</div>
<div class="line"><span class="lineno">  212</span>            entry.SpellFamilyMask2 != 0 || entry.SchoolMask != 0 ||</div>
<div class="line"><span class="lineno">  213</span>            entry.DisableEffectsMask != 0)</div>
<div class="line"><span class="lineno">  214</span>        {</div>
<div class="line"><span class="lineno">  215</span>            usingExtendedFeatures++;</div>
<div class="line"><span class="lineno">  216</span>        }</div>
<div class="line"><span class="lineno">  217</span>    }</div>
<div class="line"><span class="lineno">  218</span> </div>
<div class="line"><span class="lineno">  219</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;[  INFO    ] Entries using extended features: &quot;</span> &lt;&lt; usingExtendedFeatures</div>
<div class="line"><span class="lineno">  220</span>              &lt;&lt; <span class="stringliteral">&quot; / &quot;</span> &lt;&lt; _allEntries.size() &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  221</span> </div>
<div class="line"><span class="lineno">  222</span>    <span class="comment">// At least 80% should use extended features</span></div>
<div class="line"><span class="lineno">  223</span>    EXPECT_GT(usingExtendedFeatures, _allEntries.size() * 80 / 100)</div>
<div class="line"><span class="lineno">  224</span>        &lt;&lt; <span class="stringliteral">&quot;Most entries should use extended features&quot;</span>;</div>
<div class="line"><span class="lineno">  225</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4dd4a9f2ad7b9f9c90f178e412d6853a" name="a4dd4a9f2ad7b9f9c90f178e412d6853a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4dd4a9f2ad7b9f9c90f178e412d6853a">&#9670;&#160;</a></span>TEST_F() <span class="overload">[3/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d38/classSpellProcDBCValidationTest.html">SpellProcDBCValidationTest</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CountEntriesAddingValue&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  129</span>{</div>
<div class="line"><span class="lineno">  130</span>    <span class="keywordtype">size_t</span> addsValue = 0;</div>
<div class="line"><span class="lineno">  131</span>    <span class="keywordtype">size_t</span> potentiallyRedundant = 0;</div>
<div class="line"><span class="lineno">  132</span>    <span class="keywordtype">size_t</span> noDBCYet = 0;</div>
<div class="line"><span class="lineno">  133</span> </div>
<div class="line"><span class="lineno">  134</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; entry : _allEntries)</div>
<div class="line"><span class="lineno">  135</span>    {</div>
<div class="line"><span class="lineno">  136</span>        <span class="comment">// SKIP REASON: Entries without DBC data populated cannot be compared</span></div>
<div class="line"><span class="lineno">  137</span>        <span class="comment">// against DBC defaults. The HasDBCData() check returns false when</span></div>
<div class="line"><span class="lineno">  138</span>        <span class="comment">// DBC_ProcFlags, DBC_ProcChance, and DBC_ProcCharges are all zero.</span></div>
<div class="line"><span class="lineno">  139</span>        <span class="comment">// Once DBC data is populated via MCP tools, this count should be 0.</span></div>
<div class="line"><span class="lineno">  140</span>        <span class="keywordflow">if</span> (!entry.HasDBCData())</div>
<div class="line"><span class="lineno">  141</span>        {</div>
<div class="line"><span class="lineno">  142</span>            noDBCYet++;</div>
<div class="line"><span class="lineno">  143</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  144</span>        }</div>
<div class="line"><span class="lineno">  145</span> </div>
<div class="line"><span class="lineno">  146</span>        <span class="keywordflow">if</span> (entry.AddsValueBeyondDBC())</div>
<div class="line"><span class="lineno">  147</span>            addsValue++;</div>
<div class="line"><span class="lineno">  148</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  149</span>            potentiallyRedundant++;</div>
<div class="line"><span class="lineno">  150</span>    }</div>
<div class="line"><span class="lineno">  151</span> </div>
<div class="line"><span class="lineno">  152</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;[  INFO    ] Entries adding value: &quot;</span> &lt;&lt; addsValue &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><span class="lineno">  153</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;[  INFO    ] Potentially redundant: &quot;</span> &lt;&lt; potentiallyRedundant &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><span class="lineno">  154</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;[  INFO    ] DBC data not yet populated: &quot;</span> &lt;&lt; noDBCYet &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  155</span> </div>
<div class="line"><span class="lineno">  156</span>    <span class="comment">// Most entries should add value (have PPM, cooldowns, filtering, etc.)</span></div>
<div class="line"><span class="lineno">  157</span>    <span class="keywordflow">if</span> (addsValue + potentiallyRedundant &gt; 0)</div>
<div class="line"><span class="lineno">  158</span>    {</div>
<div class="line"><span class="lineno">  159</span>        <span class="keywordtype">float</span> valueRate = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(addsValue) / (addsValue + potentiallyRedundant) * 100;</div>
<div class="line"><span class="lineno">  160</span>        std::cout &lt;&lt; <span class="stringliteral">&quot;[  INFO    ] Value-add rate: &quot;</span> &lt;&lt; valueRate &lt;&lt; <span class="stringliteral">&quot;%&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  161</span>    }</div>
<div class="line"><span class="lineno">  162</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3140cdc3c6be8230853a19725adce0df" name="a3140cdc3c6be8230853a19725adce0df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3140cdc3c6be8230853a19725adce0df">&#9670;&#160;</a></span>TEST_F() <span class="overload">[4/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d38/classSpellProcDBCValidationTest.html">SpellProcDBCValidationTest</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CountEntriesWithDBCData&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  108</span>{</div>
<div class="line"><span class="lineno">  109</span>    <span class="keywordtype">size_t</span> withDBC = 0;</div>
<div class="line"><span class="lineno">  110</span>    <span class="keywordtype">size_t</span> withoutDBC = 0;</div>
<div class="line"><span class="lineno">  111</span> </div>
<div class="line"><span class="lineno">  112</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; entry : _allEntries)</div>
<div class="line"><span class="lineno">  113</span>    {</div>
<div class="line"><span class="lineno">  114</span>        <span class="keywordflow">if</span> (entry.HasDBCData())</div>
<div class="line"><span class="lineno">  115</span>            withDBC++;</div>
<div class="line"><span class="lineno">  116</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  117</span>            withoutDBC++;</div>
<div class="line"><span class="lineno">  118</span>    }</div>
<div class="line"><span class="lineno">  119</span> </div>
<div class="line"><span class="lineno">  120</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;[  INFO    ] Entries with DBC data: &quot;</span> &lt;&lt; withDBC &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><span class="lineno">  121</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;[  INFO    ] Entries without DBC data: &quot;</span> &lt;&lt; withoutDBC &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  122</span> </div>
<div class="line"><span class="lineno">  123</span>    <span class="comment">// All entries should eventually have DBC data</span></div>
<div class="line"><span class="lineno">  124</span>    <span class="comment">// For now, just verify the count</span></div>
<div class="line"><span class="lineno">  125</span>    EXPECT_EQ(_allEntries.size(), 869u);</div>
<div class="line"><span class="lineno">  126</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a16d0dc4448f95f4d571e474baa22b657" name="a16d0dc4448f95f4d571e474baa22b657"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16d0dc4448f95f4d571e474baa22b657">&#9670;&#160;</a></span>TEST_F() <span class="overload">[5/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d38/classSpellProcDBCValidationTest.html">SpellProcDBCValidationTest</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CountNegativeSpellIds&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  262</span>{</div>
<div class="line"><span class="lineno">  263</span>    <span class="keywordtype">size_t</span> negativeIds = 0;</div>
<div class="line"><span class="lineno">  264</span>    <span class="keywordtype">size_t</span> positiveIds = 0;</div>
<div class="line"><span class="lineno">  265</span> </div>
<div class="line"><span class="lineno">  266</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; entry : _allEntries)</div>
<div class="line"><span class="lineno">  267</span>    {</div>
<div class="line"><span class="lineno">  268</span>        <span class="keywordflow">if</span> (entry.SpellId &lt; 0)</div>
<div class="line"><span class="lineno">  269</span>            negativeIds++;</div>
<div class="line"><span class="lineno">  270</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  271</span>            positiveIds++;</div>
<div class="line"><span class="lineno">  272</span>    }</div>
<div class="line"><span class="lineno">  273</span> </div>
<div class="line"><span class="lineno">  274</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;[  INFO    ] Negative SpellIds (effect-specific): &quot;</span> &lt;&lt; negativeIds &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><span class="lineno">  275</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;[  INFO    ] Positive SpellIds: &quot;</span> &lt;&lt; positiveIds &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  276</span> </div>
<div class="line"><span class="lineno">  277</span>    <span class="comment">// Both types should exist</span></div>
<div class="line"><span class="lineno">  278</span>    EXPECT_GT(negativeIds, 0u) &lt;&lt; <span class="stringliteral">&quot;Should have some effect-specific (negative ID) entries&quot;</span>;</div>
<div class="line"><span class="lineno">  279</span>    EXPECT_GT(positiveIds, 0u) &lt;&lt; <span class="stringliteral">&quot;Should have some spell-wide (positive ID) entries&quot;</span>;</div>
<div class="line"><span class="lineno">  280</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a14eea23ad6fde730eac3ff84fdffc8ad" name="a14eea23ad6fde730eac3ff84fdffc8ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14eea23ad6fde730eac3ff84fdffc8ad">&#9670;&#160;</a></span>TEST_F() <span class="overload">[6/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d38/classSpellProcDBCValidationTest.html">SpellProcDBCValidationTest</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CoverageBySpellFamily&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  287</span>{</div>
<div class="line"><span class="lineno">  288</span>    std::map&lt;uint32_t, size_t&gt; familyCounts;</div>
<div class="line"><span class="lineno">  289</span>    std::map&lt;uint32_t, std::string&gt; familyNames = {</div>
<div class="line"><span class="lineno">  290</span>        {0, <span class="stringliteral">&quot;Generic&quot;</span>}, {3, <span class="stringliteral">&quot;Mage&quot;</span>}, {4, <span class="stringliteral">&quot;Warrior&quot;</span>}, {5, <span class="stringliteral">&quot;Warlock&quot;</span>},</div>
<div class="line"><span class="lineno">  291</span>        {6, <span class="stringliteral">&quot;Priest&quot;</span>}, {7, <span class="stringliteral">&quot;Druid&quot;</span>}, {8, <span class="stringliteral">&quot;Rogue&quot;</span>}, {9, <span class="stringliteral">&quot;Hunter&quot;</span>},</div>
<div class="line"><span class="lineno">  292</span>        {10, <span class="stringliteral">&quot;Paladin&quot;</span>}, {11, <span class="stringliteral">&quot;Shaman&quot;</span>}, {15, <span class="stringliteral">&quot;DeathKnight&quot;</span>}</div>
<div class="line"><span class="lineno">  293</span>    };</div>
<div class="line"><span class="lineno">  294</span> </div>
<div class="line"><span class="lineno">  295</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; entry : _allEntries)</div>
<div class="line"><span class="lineno">  296</span>    {</div>
<div class="line"><span class="lineno">  297</span>        familyCounts[entry.SpellFamilyName]++;</div>
<div class="line"><span class="lineno">  298</span>    }</div>
<div class="line"><span class="lineno">  299</span> </div>
<div class="line"><span class="lineno">  300</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;[  INFO    ] Entries by SpellFamily:\n&quot;</span>;</div>
<div class="line"><span class="lineno">  301</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; [family, count] : familyCounts)</div>
<div class="line"><span class="lineno">  302</span>    {</div>
<div class="line"><span class="lineno">  303</span>        std::string name = familyNames.count(family) ? familyNames[family] : <span class="stringliteral">&quot;Unknown&quot;</span>;</div>
<div class="line"><span class="lineno">  304</span>        std::cout &lt;&lt; <span class="stringliteral">&quot;             &quot;</span> &lt;&lt; name &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; family &lt;&lt; <span class="stringliteral">&quot;): &quot;</span> &lt;&lt; count &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><span class="lineno">  305</span>    }</div>
<div class="line"><span class="lineno">  306</span> </div>
<div class="line"><span class="lineno">  307</span>    <span class="comment">// Should have entries from multiple spell families</span></div>
<div class="line"><span class="lineno">  308</span>    EXPECT_GT(familyCounts.size(), 5u) &lt;&lt; <span class="stringliteral">&quot;Should cover multiple spell families&quot;</span>;</div>
<div class="line"><span class="lineno">  309</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a67fce2ede01fc117b24ed6c0015ee5d5" name="a67fce2ede01fc117b24ed6c0015ee5d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67fce2ede01fc117b24ed6c0015ee5d5">&#9670;&#160;</a></span>TEST_F() <span class="overload">[7/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d38/classSpellProcDBCValidationTest.html">SpellProcDBCValidationTest</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IdentifyDBCOverrides&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  228</span>{</div>
<div class="line"><span class="lineno">  229</span>    <span class="keywordtype">size_t</span> overridesProcFlags = 0;</div>
<div class="line"><span class="lineno">  230</span>    <span class="keywordtype">size_t</span> overridesChance = 0;</div>
<div class="line"><span class="lineno">  231</span>    <span class="keywordtype">size_t</span> overridesCharges = 0;</div>
<div class="line"><span class="lineno">  232</span> </div>
<div class="line"><span class="lineno">  233</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; entry : _allEntries)</div>
<div class="line"><span class="lineno">  234</span>    {</div>
<div class="line"><span class="lineno">  235</span>        <span class="comment">// SKIP REASON: Cannot compare against DBC defaults when DBC data</span></div>
<div class="line"><span class="lineno">  236</span>        <span class="comment">// is not populated. All 869 entries currently have DBC fields = 0.</span></div>
<div class="line"><span class="lineno">  237</span>        <span class="comment">// Once populated, this loop will count actual DBC overrides.</span></div>
<div class="line"><span class="lineno">  238</span>        <span class="keywordflow">if</span> (!entry.HasDBCData())</div>
<div class="line"><span class="lineno">  239</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  240</span> </div>
<div class="line"><span class="lineno">  241</span>        <span class="keywordflow">if</span> (entry.ProcFlags != 0 &amp;&amp; entry.ProcFlags != entry.DBC_ProcFlags)</div>
<div class="line"><span class="lineno">  242</span>            overridesProcFlags++;</div>
<div class="line"><span class="lineno">  243</span> </div>
<div class="line"><span class="lineno">  244</span>        <span class="keywordflow">if</span> (entry.Chance != 0 &amp;&amp; <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(entry.Chance) != entry.DBC_ProcChance)</div>
<div class="line"><span class="lineno">  245</span>            overridesChance++;</div>
<div class="line"><span class="lineno">  246</span> </div>
<div class="line"><span class="lineno">  247</span>        <span class="keywordflow">if</span> (entry.Charges != 0 &amp;&amp; entry.Charges != entry.DBC_ProcCharges)</div>
<div class="line"><span class="lineno">  248</span>            overridesCharges++;</div>
<div class="line"><span class="lineno">  249</span>    }</div>
<div class="line"><span class="lineno">  250</span> </div>
<div class="line"><span class="lineno">  251</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;[  INFO    ] DBC Overrides:\n&quot;</span></div>
<div class="line"><span class="lineno">  252</span>              &lt;&lt; <span class="stringliteral">&quot;             ProcFlags: &quot;</span> &lt;&lt; overridesProcFlags &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><span class="lineno">  253</span>              &lt;&lt; <span class="stringliteral">&quot;             Chance: &quot;</span> &lt;&lt; overridesChance &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><span class="lineno">  254</span>              &lt;&lt; <span class="stringliteral">&quot;             Charges: &quot;</span> &lt;&lt; overridesCharges &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  255</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a918f689a14967e97deeb88c36f959a81" name="a918f689a14967e97deeb88c36f959a81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a918f689a14967e97deeb88c36f959a81">&#9670;&#160;</a></span>TEST_F() <span class="overload">[8/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d38/classSpellProcDBCValidationTest.html">SpellProcDBCValidationTest</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NoDuplicateSpellIds&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  316</span>{</div>
<div class="line"><span class="lineno">  317</span>    std::set&lt;int32_t&gt; seenIds;</div>
<div class="line"><span class="lineno">  318</span>    std::vector&lt;int32_t&gt; duplicates;</div>
<div class="line"><span class="lineno">  319</span> </div>
<div class="line"><span class="lineno">  320</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; entry : _allEntries)</div>
<div class="line"><span class="lineno">  321</span>    {</div>
<div class="line"><span class="lineno">  322</span>        <span class="keywordflow">if</span> (seenIds.count(entry.SpellId))</div>
<div class="line"><span class="lineno">  323</span>            duplicates.push_back(entry.SpellId);</div>
<div class="line"><span class="lineno">  324</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  325</span>            seenIds.insert(entry.SpellId);</div>
<div class="line"><span class="lineno">  326</span>    }</div>
<div class="line"><span class="lineno">  327</span> </div>
<div class="line"><span class="lineno">  328</span>    <span class="keywordflow">if</span> (!duplicates.empty())</div>
<div class="line"><span class="lineno">  329</span>    {</div>
<div class="line"><span class="lineno">  330</span>        std::cout &lt;&lt; <span class="stringliteral">&quot;[  WARN    ] Duplicate SpellIds found: &quot;</span>;</div>
<div class="line"><span class="lineno">  331</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keywordtype">id</span> : duplicates)</div>
<div class="line"><span class="lineno">  332</span>            <a class="code hl_namespace" href="../../d8/dcc/namespacestd.html">std</a>::cout &lt;&lt; id &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><span class="lineno">  333</span>        std::cout &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  334</span>    }</div>
<div class="line"><span class="lineno">  335</span> </div>
<div class="line"><span class="lineno">  336</span>    EXPECT_TRUE(duplicates.empty()) &lt;&lt; <span class="stringliteral">&quot;Should have no duplicate SpellIds&quot;</span>;</div>
<div class="line"><span class="lineno">  337</span>}</div>
<div class="ttc" id="anamespacestd_html"><div class="ttname"><a href="../../d8/dcc/namespacestd.html">std</a></div><div class="ttdoc">STL namespace.</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9c2b63e811e5bae6092ac12f33e514b8" name="a9c2b63e811e5bae6092ac12f33e514b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c2b63e811e5bae6092ac12f33e514b8">&#9670;&#160;</a></span>TEST_P()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TEST_P </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/da3/classSpellProcDBCValidationParamTest.html">SpellProcDBCValidationParamTest</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">EntryHasValidSpellId&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   78</span>{</div>
<div class="line"><span class="lineno">   79</span>    <span class="keyword">auto</span> <span class="keyword">const</span>&amp; entry = GetParam();</div>
<div class="line"><span class="lineno">   80</span>    int32_t spellId = std::abs(entry.SpellId);</div>
<div class="line"><span class="lineno">   81</span> </div>
<div class="line"><span class="lineno">   82</span>    <span class="comment">// Spell ID must be positive after abs</span></div>
<div class="line"><span class="lineno">   83</span>    EXPECT_GT(spellId, 0) &lt;&lt; <span class="stringliteral">&quot;SpellId must be non-zero&quot;</span>;</div>
<div class="line"><span class="lineno">   84</span> </div>
<div class="line"><span class="lineno">   85</span>    <span class="comment">// Spell IDs in WotLK should be &lt; 80000</span></div>
<div class="line"><span class="lineno">   86</span>    EXPECT_LT(spellId, 80000u)</div>
<div class="line"><span class="lineno">   87</span>        &lt;&lt; <span class="stringliteral">&quot;SpellId &quot;</span> &lt;&lt; spellId &lt;&lt; <span class="stringliteral">&quot; seems out of range for WotLK&quot;</span>;</div>
<div class="line"><span class="lineno">   88</span>}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_f7e0c1f1a42fff32e0ff6393fb6a6d60.html">azerothcore-wotlk</a></li><li class="navelem"><a class="el" href="../../dir_ee82ee7794f367a672177b3bd595def7.html">src</a></li><li class="navelem"><a class="el" href="../../dir_1e2b35566ac0cf24ea791bcb2545ed2e.html">test</a></li><li class="navelem"><a class="el" href="../../dir_337bdd013191c9d548b6f28390c35d04.html">server</a></li><li class="navelem"><a class="el" href="../../dir_432bda28dad7986d3a1dc3010dcbb57c.html">game</a></li><li class="navelem"><a class="el" href="../../dir_7ee4929d46277e5eb29eea0f8a31fa60.html">Spells</a></li><li class="navelem"><a class="el" href="../../d1/d18/SpellProcDBCValidationTest_8cpp.html">SpellProcDBCValidationTest.cpp</a></li>
    <li class="footer">Generated on Thu Feb 19 2026 06:55:54 for AzerothCore by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
